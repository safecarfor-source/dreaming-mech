# 꿈꾸는정비사 — Claude 작업 규칙

## 프로젝트 개요
- 자동차 정비소 매칭 플랫폼 (B2C SaaS)
- Frontend: Next.js 16 + React 19 + Tailwind CSS 4 + Framer Motion
- Backend: NestJS 11 + Prisma + PostgreSQL
- 언어: 한국어 서비스

---

## 디자인 규칙 (반드시 준수)

웹 디자인 작업 시 `DESIGN_SKILLS_ROADMAP.md`를 참조하고, 아래 규칙을 반드시 따를 것.

### 색상 — 60-30-10 법칙
- **60% 지배색:** 흰색/연한 그레이 (`#FFFFFF`, `#F9FAFB`, `#F3F4F6`)
- **30% 보조색:** 브랜드 퍼플 계열 (`#F5F3FF` ~ `#7C4DFF`)
- **10% 강조색:** 앰버/골드 (`#F59E0B`, `#FBBF24`)
- 퍼플은 `#7C4DFF` 하나만 메인으로 사용. `#7C3AED`, `#6D28D9` 등 유사 퍼플 혼용 금지
- 모든 색상은 CSS 변수 또는 Tailwind 토큰으로 관리. 하드코딩 금지
- 텍스트 대비율 WCAG AA (4.5:1) 이상 유지

### 타이포그래피 — 모듈러 스케일
- 기준: base 16px, 비율 Minor Third (1.200)
- Display: 48px / H1: 40px / H2: 33px / H3: 28px / H4: 23px / H5: 19px / Body: 16px / Caption: 13px
- **한글 line-height: 1.6 ~ 1.7** (W3C klreq 권장)
- 제목 line-height: 1.1 ~ 1.2
- 폰트: Pretendard 기본, weight로 위계 구분 (400 본문, 600 중요, 700 제목)
- ALL CAPS 텍스트는 letter-spacing +0.05em 이상

### 간격 — 8px 그리드
- 모든 간격은 8의 배수: 4, 8, 12, 16, 24, 32, 48, 64, 96
- 반응형 전환은 점진적으로: `p-3 sm:p-4 md:p-5 lg:p-6` (2배 점프 금지)
- 내부 패딩 ≤ 외부 마진 (Gestalt 근접성)

### 비율
- 정비소 메인 이미지: 16:9 (`aspect-ratio: 16/9`)
- 카드 썸네일: 4:3 (`aspect-ratio: 4/3`)
- 프로필/아바타: 1:1
- 이미지는 반드시 `object-fit: cover` 적용
- 같은 목록 내 카드 이미지 비율 통일

### 시각적 위계
- 제목과 본문 크기 비율 최소 1.5:1
- CTA 버튼 주변에 충분한 여백 확보
- 그림자 체계: xs(인풋) → sm(카드) → md(호버) → lg(드롭다운) → xl(모달)
- 홈페이지: Z-패턴 / 목록 페이지: F-패턴

### 트랜지션
- fast: 150ms (호버, 포커스)
- normal: 200ms (일반 전환)
- slow: 300ms (확장, 슬라이드)
- easing: cubic-bezier(0.4, 0, 0.2, 1) 기본

---

## 워크플로우 오케스트레이션

### 1. 플랜 모드 기본값
- 비자명한 작업(3단계 이상 또는 아키텍처 결정)에는 반드시 플랜 모드 진입
- 일이 틀어지면 즉시 STOP하고 재계획 — 계속 밀어붙이지 말 것
- 빌드뿐 아니라 검증 단계에도 플랜 모드 활용
- 모호함을 줄이기 위해 사전에 상세 스펙 작성

### 2. 서브에이전트 전략
- 메인 컨텍스트 윈도우를 깨끗하게 유지하기 위해 서브에이전트를 적극 활용
- 리서치, 탐색, 병렬 분석은 서브에이전트에 위임
- 복잡한 문제에는 서브에이전트를 통해 더 많은 컴퓨팅 투입
- 집중된 실행을 위해 서브에이전트당 하나의 작업만 배정

#### 사용 가능한 서브에이전트 (`.claude/agents/`)
| 에이전트 | 역할 | 모델 | 용도 |
|---------|------|------|------|
| `frontend-dev` | 프론트엔드 개발 | sonnet | UI 구현, 컴포넌트 개발 |
| `backend-dev` | 백엔드 개발 | sonnet | API, DB, 비즈니스 로직 |
| `researcher` | 조사/분석 | haiku | 코드베이스 탐색, 기술 리서치 |
| `reviewer` | 코드 리뷰 | sonnet | 품질, 보안, 디자인 규칙 검증 |
| `tester` | 테스트/검증 | haiku | 빌드 확인, 테스트 실행 |

#### 병렬 실행 패턴
- **조사 → 설계 → 구현**: researcher로 조사 후, frontend-dev + backend-dev 병렬 실행
- **구현 → 리뷰 → 검증**: 구현 후 reviewer + tester 병렬 실행
- **프론트+백 동시 개발**: API 인터페이스 합의 후 frontend-dev + backend-dev 동시 진행

#### 사용 가능한 슬래시 커맨드 (`.claude/commands/`)
- `/plan [기능명]` — 기능 설계 및 구현 계획 수립
- `/parallel-build [작업]` — 프론트/백 병렬 개발
- `/review [파일]` — 코드 리뷰
- `/build-check` — 프론트/백 빌드 + 테스트 검증

### 3. 자기개선 루프
- 사용자로부터 수정 받을 때마다 `tasks/lessons.md`에 패턴 업데이트
- 동일한 실수를 방지하는 규칙을 스스로 작성
- 실수율이 낮아질 때까지 이 레슨들을 가차 없이 반복 개선
- 세션 시작 시 관련 프로젝트의 레슨 검토

### 4. 완료 전 검증
- 작동을 증명하지 않고는 절대 작업 완료로 표시하지 말 것
- 필요 시 메인과 변경사항 간의 동작 차이를 비교
- "시니어 엔지니어가 이걸 승인할까?" 자문하기
- 테스트 실행, 로그 확인, 정확성 입증

### 5. 우아함 추구 (균형 잡힌)
- 비자명한 변경에는 "더 우아한 방법이 없을까?" 자문
- 수정이 임시방편처럼 느껴진다면: "지금 알고 있는 모든 것을 고려해 우아한 솔루션을 구현"
- 간단하고 명확한 수정에는 이 과정 생략 — 과잉 설계 금지
- 발표 전에 자신의 작업을 스스로 검토

### 6. 자율 버그 수정
- 버그 리포트를 받으면 그냥 고쳐라. 일일이 지시를 구하지 말 것
- 로그, 오류, 실패한 테스트를 직접 찾아 해결
- 사용자로부터 컨텍스트 전환 불필요
- 말하지 않아도 CI 실패 테스트는 직접 수정

---

## 태스크 관리

1. **계획 우선:** `tasks/todo.md`에 체크 가능한 항목으로 계획 작성
2. **계획 검증:** 구현 시작 전 확인
3. **진행 추적:** 진행하면서 항목 완료 표시
4. **변경 설명:** 각 단계에서 고수준 요약 제공
5. **결과 문서화:** `tasks/todo.md`에 검토 섹션 추가
6. **레슨 캡처:** 수정 후 `tasks/lessons.md` 업데이트

---

## 코드 컨벤션
- TypeScript strict mode
- 컴포넌트: PascalCase
- 함수/변수: camelCase
- 파일: kebab-case 또는 PascalCase (컴포넌트)
- Tailwind 클래스 사용, 인라인 스타일 최소화
- 한국어 주석 사용 가능

---

## 핵심 원칙

- **단순함 우선:** 모든 변경을 최대한 단순하게. 최소한의 코드 영향.
- **게으름 금지:** 근본 원인을 찾아라. 임시 수정 없음. 시니어 개발자 기준.
- **최소 영향:** 변경은 필요한 부분만. 새로운 버그 도입 금지.
